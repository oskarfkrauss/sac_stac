---

title: Core Utils

keywords: fastai
sidebar: home_sidebar

summary: "Basic utility functions used while creating a stac catalogue."
description: "Basic utility functions used while creating a stac catalogue."
nb_path: "00_utils.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_utils.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Sedas">Sedas<a class="anchor-link" href="#Sedas"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Probably best if we start by logging into sedas to be able to access datasets in their current format.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="sedas_client" class="doc_header"><code>sedas_client</code><a href="https://github.com/tjones1993/sac_stac/tree/master/sac_stac/utils.py#L13" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>sedas_client</code>()</p>
</blockquote>
<p>Log into sedas api.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sedas_client</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;sedas_pyapi.sedas_api.SeDASAPI at 0x7f850469bc10&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>should inc. test for env vars...?</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_sedas_collections" class="doc_header"><code>get_sedas_collections</code><a href="https://github.com/tjones1993/sac_stac/tree/master/sac_stac/utils.py#L20" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_sedas_collections</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_sedas_collections</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;Available groups are: Cosmo-SkyMed, SPOT, Pleiades, S1, S2, AIRSAR&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Cloud-Optimised-Formatting">Cloud-Optimised Formatting<a class="anchor-link" href="#Cloud-Optimised-Formatting"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Once we have access to the datasets, we will want to convert raster images of any format into a default COG format. (It helps that COGs are now an official <a href="https://gdal.org/drivers/raster/cog.html">gdal driver</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Object-Storage">Object Storage<a class="anchor-link" href="#Object-Storage"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="s3_create_client" class="doc_header"><code>s3_create_client</code><a href="https://github.com/tjones1993/sac_stac/tree/master/sac_stac/utils.py#L29" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>s3_create_client</code>(<strong><code>s3_bucket</code></strong>)</p>
</blockquote>
<p>Create and set up a connection to S3
:param s3_bucket:
:return: the s3 client object.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can use this to connect to any S3-like object storage end point. Assumes env vars.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="s3_single_upload" class="doc_header"><code>s3_single_upload</code><a href="https://github.com/tjones1993/sac_stac/tree/master/sac_stac/utils.py#L70" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>s3_single_upload</code>(<strong><code>in_path</code></strong>, <strong><code>s3_path</code></strong>, <strong><code>s3_bucket</code></strong>)</p>
</blockquote>
<p>put a file into S3 from the local file system.
:param in_path: a path to a file on the local file system
:param s3_path: where in S3 to put the file.
:return: None</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_rel_dir_s3_paths" class="doc_header"><code>get_rel_dir_s3_paths</code><a href="https://github.com/tjones1993/sac_stac/tree/master/sac_stac/utils.py#L90" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_rel_dir_s3_paths</code>(<strong><code>local_dir</code></strong>, <strong><code>s3_dir</code></strong>)</p>
</blockquote>
<p>returns local path, remote path pair list.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="s3_upload_dir" class="doc_header"><code>s3_upload_dir</code><a href="https://github.com/tjones1993/sac_stac/tree/master/sac_stac/utils.py#L102" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>s3_upload_dir</code>(<strong><code>in_dir</code></strong>, <strong><code>s3_bucket</code></strong>, <strong><code>s3_dir</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="s3_list_objects_paths" class="doc_header"><code>s3_list_objects_paths</code><a href="https://github.com/tjones1993/sac_stac/tree/master/sac_stac/utils.py#L113" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>s3_list_objects_paths</code>(<strong><code>s3_bucket</code></strong>, <strong><code>prefix</code></strong>)</p>
</blockquote>
<p>List of paths only returned, not full object responses</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="s3_list_objects" class="doc_header"><code>s3_list_objects</code><a href="https://github.com/tjones1993/sac_stac/tree/master/sac_stac/utils.py#L121" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>s3_list_objects</code>(<strong><code>s3_bucket</code></strong>, <strong><code>prefix</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="STAC">STAC<a class="anchor-link" href="#STAC"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Export">Export<a class="anchor-link" href="#Export"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nbdev.export</span> <span class="kn">import</span> <span class="n">notebook2script</span><span class="p">;</span> <span class="n">notebook2script</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Converted 00_utils.ipynb.
Converted index.ipynb.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

