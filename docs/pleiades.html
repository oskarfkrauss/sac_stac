---

title: Pleiades Example


keywords: fastai
sidebar: home_sidebar

summary: "Working through conversion to cogs, upload to object storage, stack item metadata parsing, etc. for pleiades datasets"
description: "Working through conversion to cogs, upload to object storage, stack item metadata parsing, etc. for pleiades datasets"
nb_path: "01_pleiades.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 01_pleiades.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">os</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Find-some-useful-samples">Find some useful samples<a class="anchor-link" href="#Find-some-useful-samples"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Probably best if we find some samples to work through the process.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">sedas_find_datasets</span><span class="p">(</span><span class="s2">&quot;POLYGON((-1.91 51.81,-1.15 51.81,-1.15 51.50,-1.91 51.50,-1.91 51.81))&quot;</span><span class="p">,</span> 
                             <span class="s2">&quot;2000-01-01T00:00:00Z&quot;</span><span class="p">,</span> 
                             <span class="s2">&quot;2020-10-27T00:00:00Z&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;Pleiades&quot;</span>
                            <span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;products&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>productId</th>
      <th>supplierId</th>
      <th>type</th>
      <th>satelliteName</th>
      <th>instrumentName</th>
      <th>modeName</th>
      <th>sensorType</th>
      <th>sensorResolution</th>
      <th>coordinatesWKT</th>
      <th>start</th>
      <th>...</th>
      <th>area</th>
      <th>aoiCoveragePercent</th>
      <th>usefulAreaPercent</th>
      <th>cloudCoveragePercent</th>
      <th>productType</th>
      <th>latency</th>
      <th>ql</th>
      <th>thumbnail</th>
      <th>vendorSpecific</th>
      <th>downloadUrl</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>c0ec9a5f12356e87bc910ddbc49dbb76</td>
      <td>Pleiades_UKSA396_SO18034616-96-01_DS_PHR1B_201...</td>
      <td>ARCHIVE</td>
      <td>Pleiades-1B</td>
      <td>MS/PAN</td>
      <td>0.000</td>
      <td>Optical</td>
      <td>2.0</td>
      <td>POLYGON((-1.654728 51.309517,-1.345414 51.3081...</td>
      <td>2018-10-24T11:17:22Z</td>
      <td>...</td>
      <td>4.825125e+08</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>0.0</td>
      <td>L3</td>
      <td>Standard</td>
      <td>https://geobrowser.satapps.org/archiveql/aeweb...</td>
      <td>https://sedasdm.satapps.org/qls/qlmgr.php?scen...</td>
      <td>{'property': 'vendorSpecific', 'Filehash': 'cf...</td>
      <td>https://sedasdm.satapps.org/datamgr/datamgr.ph...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>94cc7887414be0912de7ca44288f79da</td>
      <td>Pleiades_UKSA174_SO18034614-74-01_DS_PHR1A_201...</td>
      <td>ARCHIVE</td>
      <td>Pleiades-1A</td>
      <td>MS/PAN</td>
      <td>0.000</td>
      <td>Optical</td>
      <td>2.0</td>
      <td>POLYGON((-2.153852 51.603313,-1.841533 51.6033...</td>
      <td>2018-09-29T11:10:08Z</td>
      <td>...</td>
      <td>1.565260e+08</td>
      <td>2.0</td>
      <td>22.0</td>
      <td>0.0</td>
      <td>L3</td>
      <td>Standard</td>
      <td>https://geobrowser.satapps.org/archiveql/aeweb...</td>
      <td>https://sedasdm.satapps.org/qls/qlmgr.php?scen...</td>
      <td>{'property': 'vendorSpecific', 'Filehash': '4b...</td>
      <td>https://sedasdm.satapps.org/datamgr/datamgr.ph...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>6ac7da92a92161839c0bf29ab1b878d3</td>
      <td>Pleiades_UKSA173_SO18034614-73-01_DS_PHR1A_201...</td>
      <td>ARCHIVE</td>
      <td>Pleiades-1A</td>
      <td>MS/PAN</td>
      <td>0.000</td>
      <td>Optical</td>
      <td>2.0</td>
      <td>POLYGON((-1.903588 51.628784,-1.592515 51.6281...</td>
      <td>2018-09-29T11:10:00Z</td>
      <td>...</td>
      <td>1.796598e+08</td>
      <td>10.0</td>
      <td>100.0</td>
      <td>0.0</td>
      <td>L3</td>
      <td>Standard</td>
      <td>https://geobrowser.satapps.org/archiveql/aeweb...</td>
      <td>https://sedasdm.satapps.org/qls/qlmgr.php?scen...</td>
      <td>{'property': 'vendorSpecific', 'Filehash': 'e6...</td>
      <td>https://sedasdm.satapps.org/datamgr/datamgr.ph...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>dd08a178209ed51cc57f5caef1e1ad7c</td>
      <td>Pleiades_UKSA341_SO18034616-41-01_DS_PHR1B_201...</td>
      <td>ARCHIVE</td>
      <td>Pleiades-1B</td>
      <td>MS/PAN</td>
      <td>0.000</td>
      <td>Optical</td>
      <td>2.0</td>
      <td>POLYGON((-1.401923 51.155725,-1.101068 51.1538...</td>
      <td>2018-09-02T11:17:34Z</td>
      <td>...</td>
      <td>8.211908e+08</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>L3</td>
      <td>Standard</td>
      <td>https://geobrowser.satapps.org/archiveql/aeweb...</td>
      <td>https://sedasdm.satapps.org/qls/qlmgr.php?scen...</td>
      <td>{'property': 'vendorSpecific', 'Filehash': 'a5...</td>
      <td>https://sedasdm.satapps.org/datamgr/datamgr.ph...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>97528406bc14d1c94ef22d20b4b26c7a</td>
      <td>Pleiades_UKSA305_SO18034616-5-01_DS_PHR1B_2018...</td>
      <td>ARCHIVE</td>
      <td>Pleiades-1B</td>
      <td>MS/PAN</td>
      <td>0.000</td>
      <td>Optical</td>
      <td>2.0</td>
      <td>POLYGON((-1.576165 51.728406,-1.265721 51.7268...</td>
      <td>2018-07-24T11:24:30Z</td>
      <td>...</td>
      <td>4.256422e+08</td>
      <td>11.0</td>
      <td>46.0</td>
      <td>1.0</td>
      <td>L3</td>
      <td>Standard</td>
      <td>https://geobrowser.satapps.org/archiveql/aeweb...</td>
      <td>https://sedasdm.satapps.org/qls/qlmgr.php?scen...</td>
      <td>{'property': 'vendorSpecific', 'Filehash': '77...</td>
      <td>https://sedasdm.satapps.org/datamgr/datamgr.ph...</td>
    </tr>
    <tr>
      <th>5</th>
      <td>3e8d4c9096b3ba5c7126499e442424f5</td>
      <td>Pleiades_UKSA87_SO18034613-87-01_DS_PHR1A_2018...</td>
      <td>ARCHIVE</td>
      <td>Pleiades-1A</td>
      <td>MS/PAN</td>
      <td>0.000</td>
      <td>Optical</td>
      <td>2.0</td>
      <td>POLYGON((-1.413484 51.469752,-1.089638 51.4676...</td>
      <td>2018-06-29T11:18:17Z</td>
      <td>...</td>
      <td>9.264473e+08</td>
      <td>34.0</td>
      <td>67.0</td>
      <td>0.0</td>
      <td>L3</td>
      <td>Standard</td>
      <td>https://geobrowser.satapps.org/archiveql/aeweb...</td>
      <td>https://sedasdm.satapps.org/qls/qlmgr.php?scen...</td>
      <td>{'property': 'vendorSpecific', 'Filehash': '7f...</td>
      <td>https://sedasdm.satapps.org/datamgr/datamgr.ph...</td>
    </tr>
    <tr>
      <th>6</th>
      <td>b5ff24c70eba28f3ec7292c356fb27b0</td>
      <td>Pleiades_UKSA204_SO18034615-4-01_DS_PHR1B_2018...</td>
      <td>ARCHIVE</td>
      <td>Pleiades-1B</td>
      <td>MS/PAN</td>
      <td>0.000</td>
      <td>Optical</td>
      <td>2.0</td>
      <td>POLYGON((-1.928964 51.516819,-1.63821 51.51628...</td>
      <td>2018-02-25T11:21:25Z</td>
      <td>...</td>
      <td>2.385591e+08</td>
      <td>12.0</td>
      <td>94.0</td>
      <td>0.0</td>
      <td>L3</td>
      <td>Standard</td>
      <td>https://geobrowser.satapps.org/archiveql/aeweb...</td>
      <td>https://sedasdm.satapps.org/qls/qlmgr.php?scen...</td>
      <td>{'property': 'vendorSpecific', 'Filehash': '4b...</td>
      <td>https://sedasdm.satapps.org/datamgr/datamgr.ph...</td>
    </tr>
    <tr>
      <th>7</th>
      <td>92fe8121944a5267861d31597afb016a</td>
      <td>Pleiades_UKSA7_SO18034613-7-01_DS_PHR1A_201802...</td>
      <td>ARCHIVE</td>
      <td>Pleiades-1A</td>
      <td>MS/PAN</td>
      <td>0.000</td>
      <td>Optical</td>
      <td>2.0</td>
      <td>POLYGON((-1.606218 51.306711,-1.294645 51.3052...</td>
      <td>2018-02-24T11:27:55Z</td>
      <td>...</td>
      <td>6.639221e+08</td>
      <td>11.0</td>
      <td>29.0</td>
      <td>0.0</td>
      <td>L3</td>
      <td>Standard</td>
      <td>https://geobrowser.satapps.org/archiveql/aeweb...</td>
      <td>https://sedasdm.satapps.org/qls/qlmgr.php?scen...</td>
      <td>{'property': 'vendorSpecific', 'Filehash': 'ef...</td>
      <td>https://sedasdm.satapps.org/datamgr/datamgr.ph...</td>
    </tr>
  </tbody>
</table>
<p>8 rows × 22 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Use-single-example">Use single example<a class="anchor-link" href="#Use-single-example"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">wd</span> <span class="o">=</span> <span class="s2">&quot;/tmp/data/&quot;</span>

<span class="n">scene_res</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;products&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">scene_name</span> <span class="o">=</span> <span class="n">sedas_res</span><span class="p">[</span><span class="s1">&#39;supplierId&#39;</span><span class="p">]</span>
<span class="n">scene_name</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;Pleiades_UKSA396_SO18034616-96-01_DS_PHR1B_201810241117221_FR1_PX_W002N51_0710_01712&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">scene_res</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;productId&#39;: &#39;c0ec9a5f12356e87bc910ddbc49dbb76&#39;,
 &#39;supplierId&#39;: &#39;Pleiades_UKSA396_SO18034616-96-01_DS_PHR1B_201810241117221_FR1_PX_W002N51_0710_01712&#39;,
 &#39;type&#39;: &#39;ARCHIVE&#39;,
 &#39;satelliteName&#39;: &#39;Pleiades-1B&#39;,
 &#39;instrumentName&#39;: &#39;MS/PAN&#39;,
 &#39;modeName&#39;: &#39;0.000&#39;,
 &#39;sensorType&#39;: &#39;Optical&#39;,
 &#39;sensorResolution&#39;: 2.0,
 &#39;coordinatesWKT&#39;: &#39;POLYGON((-1.654728 51.309517,-1.345414 51.308197,-1.342538 51.509259,-1.653212 51.510588,-1.654728 51.309517))&#39;,
 &#39;start&#39;: &#39;2018-10-24T11:17:22Z&#39;,
 &#39;stop&#39;: &#39;2018-10-24T11:17:24Z&#39;,
 &#39;orbitDirection&#39;: &#39;DESCENDING&#39;,
 &#39;area&#39;: 482512528.74,
 &#39;aoiCoveragePercent&#39;: 1.0,
 &#39;usefulAreaPercent&#39;: 5.0,
 &#39;cloudCoveragePercent&#39;: 0.0,
 &#39;productType&#39;: &#39;L3&#39;,
 &#39;latency&#39;: &#39;Standard&#39;,
 &#39;ql&#39;: &#39;https://geobrowser.satapps.org/archiveql/aewebpub/getaeql.php?aeimgid=c0ec9a5f12356e87bc910ddbc49dbb76&amp;aeimgtype=ql&amp;epsg=3857&amp;&#39;,
 &#39;thumbnail&#39;: &#39;https://sedasdm.satapps.org/qls/qlmgr.php?sceneid=UKSA/pleiades/Pleiades_UKSA396_SO18034616-96-01_DS_PHR1B_201810241117221_FR1_PX_W002N51_0710_01712/c0ec9a5f12356e87bc910ddbc49dbb76/geo-quick-look-thumb.png&#39;,
 &#39;vendorSpecific&#39;: {&#39;property&#39;: &#39;vendorSpecific&#39;,
  &#39;Filehash&#39;: &#39;cfa0e45b42c7d03850a0cbe9d3c5af6f&#39;,
  &#39;Identifier&#39;: &#39;Pleiades_UKSA396_SO18034616-96-01_DS_PHR1B_201810241117221_FR1_PX_W002N51_0710_01712&#39;,
  &#39;FilesizeBytes&#39;: &#39;2608835665&#39;,
  &#39;Supplier Product ID&#39;: &#39;DS_PHR1B_201810241117221_FR1_PX_W002N51_0710_01712&#39;,
  &#39;Processing Level&#39;: &#39;ORTHO&#39;,
  &#39;Projected CRS Code&#39;: &#39;urn:ogc:def:crs:EPSG::27700&#39;},
 &#39;downloadUrl&#39;: &#39;https://sedasdm.satapps.org/datamgr/datamgr.php?p=SSGP&amp;sceneid=Pleiades_UKSA396_SO18034616-96-01_DS_PHR1B_201810241117221_FR1_PX_W002N51_0710_01712.zip&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Download-&amp;-Extract">Download &amp; Extract<a class="anchor-link" href="#Download-&amp;-Extract"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>create zip path to download into from sedas result</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">down_zip</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">wd</span><span class="si">}{</span><span class="n">scene_res</span><span class="p">[</span><span class="s1">&#39;supplierId&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.zip&quot;</span>
<span class="n">down_zip</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;/tmp/data/Pleiades_UKSA396_SO18034616-96-01_DS_PHR1B_201810241117221_FR1_PX_W002N51_0710_01712.zip&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>download the scene</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sedas_download</span><span class="p">(</span><span class="n">scene_res</span><span class="p">,</span> <span class="n">down_zip</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">down_zip</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>create a scene directory path to extract into</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">scene_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">down_zip</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span><span class="si">}</span><span class="s2">/&quot;</span>
<span class="n">scene_dir</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;/tmp/data/Pleiades_UKSA396_SO18034616-96-01_DS_PHR1B_201810241117221_FR1_PX_W002N51_0710_01712/&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>extract</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sedas_extract</span><span class="p">(</span><span class="n">down_zip</span><span class="p">,</span> <span class="n">scene_dir</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Mosaic-&amp;-COG">Mosaic &amp; COG<a class="anchor-link" href="#Mosaic-&amp;-COG"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Export">Export<a class="anchor-link" href="#Export"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nbdev.export</span> <span class="kn">import</span> <span class="n">notebook2script</span><span class="p">;</span> <span class="n">notebook2script</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Converted 00_core.ipynb.
Converted index.ipynb.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

